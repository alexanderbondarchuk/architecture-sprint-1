# Задание 1

## Legacy cтруктура проекта
Проект состоит из двух подпроектов backend и frontend, базы данных MongoDb. Используется docker с плагином docker compose. backend проект реализован на node.js. frontend имеет структуру не сильно отличающуюся от стандартного react-приложения. Директория styles, на которую ссылаются в деталях задачи, отсутствует.

### Компоненты и модули
- Часто наследуемый компонент PopupWithForm. Корневой компонент App взаимодействует с дочерними, используя утилиты api, auth и состояние.
- Компонент Main.js реализует вёрстку и логику функционалов профиля и карточек мест, что нарушает принцип единой ответственности. Вместе с этим блок профиля включает в себя функциональность добавления карточки места, что нарушает тот же принцип 

### Маршрутизация
Есть маршруты /signin, /signup и / (корневой). Корневой маршрут защищён и его компоненты не будут доступны, если не пройдена авторизация пользователя.

### Зависимости проекта
У проекта необходимый минимальный/стандартный набор зависимостей, необходимый для сборки и запуска react-приложения. В дополнение к ним присутствуют библиотеки для тестирования сборки и снятия метрик загрузки страницы.

### Утилиты и вспомогательные функции
Используются утилиты api.js и auth.js. Общих функций между этими двумя утилитами, а так же дублирования функций нет.

### Стили и их организация
Стили расположены в директории blocks и vendor. Директория blocks и содержимое её файлов организованы по методологии похожей на БЭМ (https://bem.info).

### Выбор паттерна декомпозиции
Проект монолитный, реализован с помощью библиотеки react.js. Для миграции на микросервисную архитектуру (микрофронтенды) наиболее релевантным выглядит использование паттерна Webpack Module Federation. Паттерн, при должном уровне организации процесса, позволит применить стратегии вертикальная нарезка, автономность команд и изоляция. По мере развития и усложнения проекта, при необходимости, можно будет использовать другие webpack-совместимые библиотеки в каждом микросервисе




## Новая структура проекта


### Cards
Управления карточками мест (создание, удаление)
- Принято решение включить в него функционал оценки карточек (лайки), т.к. пока он используется только в карточках.
- В теге `<li className="places__item card">` удалил класс `places__item`, т.к. это была единственная точка его упоминания в монолитном проекте. При разбиении на микрофронтенды возникла связанность с файлом Main.js, который отправился в микрофронтенд **Host**

Компоненты интерфейса:
- [Card](/frontend/microfrontend/cards/src/components/Card.js)
- На следующих этапах реинжиниринга из микрофронтенда **Host** можно рассмотреть перенос вёрстки и логики компонентов `AddPlacePopup` и `ImagePopup`, т.к. это будет удовлетворять стратегиям вертикальной нарезки и изоляции

API:
- [api.js](/frontend/microfrontend/cards/utils/api.js)

### Users
Управление профилем пользователя (аватар, имя, занятие)
- На текущем этапе разделения на микрофронтенды сервис будет содержать логику, отвечающую за сущность "Пользователь"

Компоненты интерфейса:
- Отсутствуют, но на следующих этапах реинжиниринга из микрофронтенда **Host** можно рассмотреть перенос вёрстки и логики компонентов `EditAvatarPopup` и `EditProfilePopup`, т.к. это будет удовлетворять стратегиям вертикальной нарезки и изоляции

API:
- [api.js](/frontend/microfrontend/users/utils/api.js)

### Auth
Управление авторизацией пользователя и выхода из системы
- Выделен отдельно от Users, т.к. механизмы авторизации соответствующие требованиям безопасности довольно сложные в разработке и сопровождении. Так же могут меняться способы авторизации/регистрации (например, с помощью соцсетей)

Компоненты интерфейса:
- [Login](/frontend/microfrontend/auth/src/components/Login.js)
- [Register](/frontend/microfrontend/auth/src/components/Register.js)

API:
- [auth.js](/frontend/microfrontend/auth/src/utils/auth.js)

### Host
Хост приложение, осуществляющее композицию "клиентским" методом. Способ интеграции компонентов - run time.
- После разделения монолитного приложения этот сервис сохранил некоторые элементы "монолитности", но может сопровождаться отдельной командой. В то же время логику и количество компонентов в этом сервисе можно сократить, выделив *Popup компоненты либо в отдельную common-библиотеку, которая будет использоваться другими микрофронтендами. Либо, проведя более глубокий реинжиниринг с устранением зависимостей, распределить в сервисы **Cards**, **Users**, **Auth**

Компоненты интерфейса:
- [Main](/frontend/microfrontend/host/src/components/Main.js)
- [Footer](/frontend/microfrontend/host/src/components/Footer.js) 
- [Header](/frontend/microfrontend/host/src/components/Header.js)
- [ProtectedRoute](/frontend/microfrontend/host/src/components/ProtectedRoute.js)
- [PopupWithForm](/frontend/microfrontend/host/src/components/PopupWithForm.js)
- [AddPlacePopup](/frontend/microfrontend/host/src/components/AddPlacePopup.js) 
- [ImagePopup](/frontend/microfrontend/host/src/components/ImagePopup.js) 
- [EditAvatarPopup](/frontend/microfrontend/host/src/components/EditAvatarPopup.js) 
- [EditProfilePopup](/frontend/microfrontend/host/src/components/EditProfilePopup.js) 
- [InfoTooltip](/frontend/microfrontend/host/src/components/InfoTooltip.js)

API:
- [api.js](/frontend/microfrontend/host/src/utils/api.js)

# Задание 2
Документ представлен двумя вкладками:
- Monolith - исходный вариант задачи без внесения изменений
- Microservices - микросервисная архитектура, включающая в себя описание частного случая потоков взаимодействия сервисов между собой
[Draw.io](/task2.drawio)